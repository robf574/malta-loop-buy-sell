import{y as H,j as e,f as g,z as T,B as j}from"./ui-vendor-KGc3Tmx2.js";import{r as i}from"./react-vendor-FMUcr-E9.js";import{g as N,k as V,j as q,A as h,C as m,a as w,d as x,b as D,B as p}from"./index-DFFuSgAk.js";import{a as G,L as z}from"./LoadingStates-BjKbdEeZ.js";import{u as K}from"./router-vendor-jMJ2wIS-.js";import{e as Q,a as W,r as J,f as X,p as Y,L as Z}from"./icons-vendor-CsDdOOCw.js";import"./supabase-vendor-5tOxYv8x.js";import"./utils-vendor-rD1T8BKC.js";import"./query-vendor-BIjNb4qi.js";var E={exports:{}},L={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=i;function ee(a,t){return a===t&&(a!==0||1/a===1/t)||a!==a&&t!==t}var ae=typeof Object.is=="function"?Object.is:ee,te=f.useState,se=f.useEffect,re=f.useLayoutEffect,ne=f.useDebugValue;function oe(a,t){var s=t(),o=te({inst:{value:s,getSnapshot:t}}),n=o[0].inst,r=o[1];return re(function(){n.value=s,n.getSnapshot=t,v(n)&&r({inst:n})},[a,s,t]),se(function(){return v(n)&&r({inst:n}),a(function(){v(n)&&r({inst:n})})},[a]),ne(s),s}function v(a){var t=a.getSnapshot;a=a.value;try{var s=t();return!ae(a,s)}catch{return!0}}function ie(a,t){return t()}var le=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ie:oe;L.useSyncExternalStore=f.useSyncExternalStore!==void 0?f.useSyncExternalStore:le;E.exports=L;var ce=E.exports;function ue(){return ce.useSyncExternalStore(de,()=>!0,()=>!1)}function de(){return()=>{}}var S="Avatar",[fe,Ae]=H(S),[me,C]=fe(S),b=i.forwardRef((a,t)=>{const{__scopeAvatar:s,...o}=a,[n,r]=i.useState("idle");return e.jsx(me,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:r,children:e.jsx(g.span,{...o,ref:t})})});b.displayName=S;var R="AvatarImage",I=i.forwardRef((a,t)=>{const{__scopeAvatar:s,src:o,onLoadingStatusChange:n=()=>{},...r}=a,u=C(R,s),l=xe(o,r),c=T(d=>{n(d),u.onImageLoadingStatusChange(d)});return j(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?e.jsx(g.img,{...r,ref:t,src:o}):null});I.displayName=R;var k="AvatarFallback",_=i.forwardRef((a,t)=>{const{__scopeAvatar:s,delayMs:o,...n}=a,r=C(k,s),[u,l]=i.useState(o===void 0);return i.useEffect(()=>{if(o!==void 0){const c=window.setTimeout(()=>l(!0),o);return()=>window.clearTimeout(c)}},[o]),u&&r.imageLoadingStatus!=="loaded"?e.jsx(g.span,{...n,ref:t}):null});_.displayName=k;function A(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function xe(a,{referrerPolicy:t,crossOrigin:s}){const o=ue(),n=i.useRef(null),r=o?(n.current||(n.current=new window.Image),n.current):null,[u,l]=i.useState(()=>A(r,a));return j(()=>{l(A(r,a))},[r,a]),j(()=>{const c=B=>()=>{l(B)};if(!r)return;const d=c("loaded"),y=c("error");return r.addEventListener("load",d),r.addEventListener("error",y),t&&(r.referrerPolicy=t),typeof s=="string"&&(r.crossOrigin=s),()=>{r.removeEventListener("load",d),r.removeEventListener("error",y)}},[r,s,t]),u}var P=b,F=I,M=_;const $=i.forwardRef(({className:a,...t},s)=>e.jsx(P,{ref:s,className:N("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t}));$.displayName=P.displayName;const O=i.forwardRef(({className:a,...t},s)=>e.jsx(F,{ref:s,className:N("aspect-square h-full w-full",a),...t}));O.displayName=F.displayName;const U=i.forwardRef(({className:a,...t},s)=>e.jsx(M,{ref:s,className:N("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t}));U.displayName=M.displayName;function Ee(){var l,c;const{user:a,profile:t,signOut:s,refreshProfile:o}=V(),{loading:n}=q(),r=K();i.useEffect(()=>{a&&o()},[a,o]);const u=async()=>{try{await s(),r("/auth")}catch{}};return n?e.jsx(h,{children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(G,{}),e.jsx(z,{})]})}):!a||!t?e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Unable to load profile"})})})}):e.jsx(h,{children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(m,{children:e.jsx(w,{className:"text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs($,{className:"h-20 w-20",children:[e.jsx(O,{src:t.avatar_url}),e.jsx(U,{className:"text-lg",children:((l=t.username)==null?void 0:l.charAt(0).toUpperCase())||((c=a.email)==null?void 0:c.charAt(0).toUpperCase())})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.username||"User"}),e.jsx("p",{className:"text-muted-foreground",children:a.email}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.locality})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(m,{children:e.jsxs(x,{className:"pt-6 text-center",children:[e.jsx(Q,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Listings"})]})}),e.jsx(m,{children:e.jsxs(x,{className:"pt-6 text-center",children:[e.jsx(W,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Favorites"})]})})]}),e.jsxs(m,{children:[e.jsx(w,{children:e.jsx(D,{children:"Quick Actions"})}),e.jsxs(x,{className:"space-y-3",children:[e.jsxs(p,{variant:"outline",className:"w-full justify-start",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Account Settings"]}),e.jsxs(p,{variant:"outline",className:"w-full justify-start",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"My Events"]}),e.jsxs(p,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Reviews"]})]})]}),e.jsx(m,{children:e.jsx(x,{className:"pt-6",children:e.jsxs(p,{variant:"destructive",className:"w-full",onClick:u,children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Sign Out"]})})})]})})}export{Ee as default};
