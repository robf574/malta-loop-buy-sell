import{y as B,j as e,f as g,z as T,B as j}from"./ui-vendor-KGc3Tmx2.js";import{r as i}from"./react-vendor-FMUcr-E9.js";import{h as N,l as V,k as q,A as p,S as D,C as m,f as w,d as x,b as G,B as h}from"./index-DftoCVh9.js";import{a as z,L as K}from"./LoadingStates-DatyphR7.js";import{u as Q}from"./router-vendor-jMJ2wIS-.js";import{e as W,a as J,r as X,f as Y,p as Z,L as ee}from"./icons-vendor-CsDdOOCw.js";import"./supabase-vendor-5tOxYv8x.js";import"./utils-vendor-rD1T8BKC.js";import"./query-vendor-BIjNb4qi.js";var E={exports:{}},L={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=i;function ae(a,t){return a===t&&(a!==0||1/a===1/t)||a!==a&&t!==t}var te=typeof Object.is=="function"?Object.is:ae,se=f.useState,re=f.useEffect,ne=f.useLayoutEffect,oe=f.useDebugValue;function ie(a,t){var s=t(),o=se({inst:{value:s,getSnapshot:t}}),n=o[0].inst,r=o[1];return ne(function(){n.value=s,n.getSnapshot=t,v(n)&&r({inst:n})},[a,s,t]),re(function(){return v(n)&&r({inst:n}),a(function(){v(n)&&r({inst:n})})},[a]),oe(s),s}function v(a){var t=a.getSnapshot;a=a.value;try{var s=t();return!te(a,s)}catch{return!0}}function ce(a,t){return t()}var le=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ce:ie;L.useSyncExternalStore=f.useSyncExternalStore!==void 0?f.useSyncExternalStore:le;E.exports=L;var ue=E.exports;function de(){return ue.useSyncExternalStore(fe,()=>!0,()=>!1)}function fe(){return()=>{}}var S="Avatar",[me,Ee]=B(S),[xe,C]=me(S),b=i.forwardRef((a,t)=>{const{__scopeAvatar:s,...o}=a,[n,r]=i.useState("idle");return e.jsx(xe,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:r,children:e.jsx(g.span,{...o,ref:t})})});b.displayName=S;var R="AvatarImage",I=i.forwardRef((a,t)=>{const{__scopeAvatar:s,src:o,onLoadingStatusChange:n=()=>{},...r}=a,u=C(R,s),c=he(o,r),l=T(d=>{n(d),u.onImageLoadingStatusChange(d)});return j(()=>{c!=="idle"&&l(c)},[c,l]),c==="loaded"?e.jsx(g.img,{...r,ref:t,src:o}):null});I.displayName=R;var k="AvatarFallback",_=i.forwardRef((a,t)=>{const{__scopeAvatar:s,delayMs:o,...n}=a,r=C(k,s),[u,c]=i.useState(o===void 0);return i.useEffect(()=>{if(o!==void 0){const l=window.setTimeout(()=>c(!0),o);return()=>window.clearTimeout(l)}},[o]),u&&r.imageLoadingStatus!=="loaded"?e.jsx(g.span,{...n,ref:t}):null});_.displayName=k;function A(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function he(a,{referrerPolicy:t,crossOrigin:s}){const o=de(),n=i.useRef(null),r=o?(n.current||(n.current=new window.Image),n.current):null,[u,c]=i.useState(()=>A(r,a));return j(()=>{c(A(r,a))},[r,a]),j(()=>{const l=U=>()=>{c(U)};if(!r)return;const d=l("loaded"),y=l("error");return r.addEventListener("load",d),r.addEventListener("error",y),t&&(r.referrerPolicy=t),typeof s=="string"&&(r.crossOrigin=s),()=>{r.removeEventListener("load",d),r.removeEventListener("error",y)}},[r,s,t]),u}var P=b,F=I,M=_;const $=i.forwardRef(({className:a,...t},s)=>e.jsx(P,{ref:s,className:N("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t}));$.displayName=P.displayName;const H=i.forwardRef(({className:a,...t},s)=>e.jsx(F,{ref:s,className:N("aspect-square h-full w-full",a),...t}));H.displayName=F.displayName;const O=i.forwardRef(({className:a,...t},s)=>e.jsx(M,{ref:s,className:N("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t}));O.displayName=M.displayName;function Le(){var c,l;const{user:a,profile:t,signOut:s,refreshProfile:o}=V(),{loading:n}=q(),r=Q();i.useEffect(()=>{a&&o()},[a,o]);const u=async()=>{try{await s(),r("/auth")}catch{}};return n?e.jsx(p,{children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(z,{}),e.jsx(K,{})]})}):!a||!t?e.jsx(p,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Unable to load profile"})})})}):e.jsx(p,{children:e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(D,{title:"Account"}),e.jsx(m,{children:e.jsx(w,{className:"text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs($,{className:"h-20 w-20",children:[e.jsx(H,{src:t.avatar_url}),e.jsx(O,{className:"text-lg",children:((c=t.username)==null?void 0:c.charAt(0).toUpperCase())||((l=a.email)==null?void 0:l.charAt(0).toUpperCase())})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.username||"User"}),e.jsx("p",{className:"text-muted-foreground",children:a.email}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.locality})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(m,{children:e.jsxs(x,{className:"pt-6 text-center",children:[e.jsx(W,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Listings"})]})}),e.jsx(m,{children:e.jsxs(x,{className:"pt-6 text-center",children:[e.jsx(J,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Favorites"})]})})]}),e.jsxs(m,{children:[e.jsx(w,{children:e.jsx(G,{children:"Quick Actions"})}),e.jsxs(x,{className:"space-y-3",children:[e.jsxs(h,{variant:"outline",className:"w-full justify-start",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Account Settings"]}),e.jsxs(h,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"My Events"]}),e.jsxs(h,{variant:"outline",className:"w-full justify-start",children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Reviews"]})]})]}),e.jsx(m,{children:e.jsx(x,{className:"pt-6",children:e.jsxs(h,{variant:"destructive",className:"w-full",onClick:u,children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Sign Out"]})})})]})})}export{Le as default};
