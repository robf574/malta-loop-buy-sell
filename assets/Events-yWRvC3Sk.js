import{j as s}from"./ui-vendor-KGc3Tmx2.js";import{r}from"./react-vendor-FMUcr-E9.js";import{s as m,A as x,B as c,C as i,d as n,a as p,b as h,c as u}from"./index-Ct67fvJV.js";import{u as f}from"./router-vendor-jMJ2wIS-.js";import{d as j,f as g,b as N,g as v}from"./icons-vendor-CsDdOOCw.js";import{f as w}from"./utils-vendor-rD1T8BKC.js";import"./supabase-vendor-5tOxYv8x.js";import"./query-vendor-BIjNb4qi.js";function B(){const o=f(),[t,l]=r.useState([]);r.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:e,error:a}=await m.from("events").select("*").eq("status","Upcoming").gte("date_start",new Date().toISOString()).order("date_start",{ascending:!0});if(a)throw a;l(e||[])}catch(e){console.error("Error fetching events:",e)}};return s.jsx(x,{children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Community Events"}),s.jsx("p",{className:"text-muted-foreground",children:"Discover local sales and meetups"})]}),s.jsxs(c,{className:"w-full",onClick:()=>o("/events/create"),children:[s.jsx(j,{className:"mr-2 h-4 w-4"}),"Host an Event"]}),s.jsx("div",{className:"space-y-4",children:t.length===0?s.jsx(i,{children:s.jsx(n,{className:"pt-6 text-center text-muted-foreground",children:"No upcoming events. Be the first to host one!"})}):t.map(e=>s.jsxs(i,{className:"overflow-hidden cursor-pointer hover:shadow-md transition-smooth",children:[e.cover_image_url&&s.jsx("div",{className:"aspect-[16/9] bg-muted",children:s.jsx("img",{src:e.cover_image_url,alt:e.title,className:"w-full h-full object-cover"})}),s.jsxs(p,{children:[s.jsx(h,{children:e.title}),s.jsx(u,{className:"line-clamp-2",children:e.description})]}),s.jsxs(n,{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx("span",{children:w(new Date(e.date_start),"PPP 'at' p")})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(N,{className:"h-4 w-4"}),s.jsxs("span",{children:[e.venue_name,", ",e.locality]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(v,{className:"h-4 w-4"}),s.jsxs("span",{children:[e.rsvp_count," attending",e.capacity&&` / ${e.capacity} capacity`]})]}),s.jsx(c,{className:"w-full mt-4",children:"RSVP to Event"})]})]},e.id))})]})})}export{B as default};
